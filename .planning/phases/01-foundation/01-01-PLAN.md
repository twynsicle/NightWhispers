---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - tsconfig.json
  - tsconfig.node.json
  - tsconfig.app.json
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/vite-env.d.ts
  - .gitignore
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Developer can run npm run dev and see the app at localhost"
    - "TypeScript compilation succeeds without errors"
    - "Mantine theme renders correctly"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with all dependencies"
      contains: "react"
    - path: "vite.config.ts"
      provides: "Vite build configuration"
      contains: "react"
    - path: "src/main.tsx"
      provides: "React entry point with Mantine provider"
      contains: "MantineProvider"
    - path: "src/App.tsx"
      provides: "Root component"
      exports: ["default"]
  key_links:
    - from: "index.html"
      to: "src/main.tsx"
      via: "script module import"
      pattern: "src/main.tsx"
    - from: "src/main.tsx"
      to: "src/App.tsx"
      via: "React component import"
      pattern: "import App"
---

<objective>
Initialize the React 19 + Vite 7 + TypeScript project with all dependencies for Night Whispers.

Purpose: Create the foundation that all future development builds upon - a working dev server with proper tooling.

Output: A runnable React application with Mantine UI configured, accessible at localhost:5173.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/STACK.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite project with React 19 and TypeScript</name>
  <files>
    package.json
    vite.config.ts
    tsconfig.json
    tsconfig.node.json
    tsconfig.app.json
    index.html
    src/main.tsx
    src/App.tsx
    src/vite-env.d.ts
    .gitignore
  </files>
  <action>
Create a new Vite project with React and TypeScript using `npm create vite@latest . -- --template react-ts`. Run from the project root (C:\workspace\storychat).

IMPORTANT: The project directory already has .planning/ and .git/ - run the create command with `.` to scaffold into the existing directory.

After scaffolding, update package.json dependencies to match research specs:

```json
{
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router": "^7.12.0",
    "@supabase/supabase-js": "^2.90.0",
    "@mantine/core": "^8.3.0",
    "@mantine/hooks": "^8.3.0",
    "@mantine/notifications": "^8.3.0",
    "@mantine/form": "^8.3.0",
    "@tanstack/react-query": "^5.90.0",
    "zustand": "^5.0.0",
    "nanoid": "^5.0.0"
  },
  "devDependencies": {
    "typescript": "^5.9.0",
    "vite": "^7.3.0",
    "@vitejs/plugin-react": "^4.4.0",
    "vite-plugin-pwa": "^1.2.0",
    "vitest": "^4.0.0",
    "@testing-library/react": "^16.0.0",
    "@types/react": "^19.2.0",
    "@types/react-dom": "^19.2.0"
  }
}
```

Run `npm install` to install all dependencies.

Update tsconfig.json to enable strict mode and path aliases:
- Set `"strict": true`
- Add paths for `@/*` pointing to `./src/*`

Update vite.config.ts to:
- Include the react plugin
- Set resolve alias for `@` -> `./src`
- Set server port to 5173 (default)
  </action>
  <verify>
Run `npm run dev` - should start without errors and show Vite + React template at http://localhost:5173
Run `npx tsc --noEmit` - should complete with no TypeScript errors
  </verify>
  <done>
Vite dev server runs, TypeScript compiles, all dependencies installed per STACK.md specs
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Mantine with gothic theme foundation</name>
  <files>
    src/main.tsx
    src/App.tsx
    src/theme.ts
  </files>
  <action>
Create src/theme.ts with Mantine theme configuration:
- Set colorScheme to 'dark' (gothic theme requires dark mode)
- Define primary color as crimson/red shade for accents
- Set fontFamily to system fonts (fast loading for mobile)
- Configure default radius as 'sm' for subtle rounded corners

Update src/main.tsx to:
- Import Mantine CSS files (baseline.css, default-css-variables.css, global.css per Mantine 8 architecture)
- Wrap app in MantineProvider with the custom theme
- Import and apply the theme from theme.ts

Update src/App.tsx to:
- Remove Vite boilerplate (counter, logos, etc.)
- Add a simple centered container with:
  - Title: "Night Whispers"
  - Subtitle: "Social deduction companion"
  - A primary-colored button that logs "App loaded" to console on click
- Use Mantine components (Container, Title, Text, Button)

This establishes the visual foundation without building actual features.
  </action>
  <verify>
Visit http://localhost:5173:
- Page has dark background (Mantine dark theme applied)
- "Night Whispers" title displays
- Button has crimson/red accent color
- Click button, check browser console shows "App loaded"
  </verify>
  <done>
Mantine provider configured, dark theme renders, gothic color scheme visible, basic app shell displays
  </done>
</task>

<task type="auto">
  <name>Task 3: Create environment configuration</name>
  <files>
    .env.example
    .gitignore
    src/lib/env.ts
  </files>
  <action>
Create .env.example with placeholder environment variables:
```
VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key
```

Ensure .gitignore includes:
- .env
- .env.local
- .env.*.local
- node_modules/
- dist/
- (keep existing .planning/ and .git/ NOT ignored)

Create src/lib/env.ts with typed environment variable access:
```typescript
export const env = {
  supabase: {
    url: import.meta.env.VITE_SUPABASE_URL as string,
    anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY as string,
  },
} as const;

// Validation function (call on app init)
export function validateEnv(): void {
  const required = ['VITE_SUPABASE_URL', 'VITE_SUPABASE_ANON_KEY'];
  const missing = required.filter(key => !import.meta.env[key]);

  if (missing.length > 0 && import.meta.env.PROD) {
    throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
  }
}
```

Note: Validation only throws in production - in development, missing env vars just mean Supabase features won't work yet.
  </action>
  <verify>
File .env.example exists with VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY placeholders
File .gitignore includes .env patterns
File src/lib/env.ts exports env object and validateEnv function
`npx tsc --noEmit` passes (TypeScript validates the env module)
  </verify>
  <done>
Environment configuration ready for Supabase credentials, .env properly gitignored
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run dev` starts successfully on port 5173
2. Browser shows dark-themed "Night Whispers" page with crimson accent button
3. `npx tsc --noEmit` shows no TypeScript errors
4. `npm run build` completes successfully (production build works)
5. .env.example documents required environment variables
</verification>

<success_criteria>
- Vite dev server runs without errors
- React 19 + TypeScript 5.9 configured correctly
- Mantine 8 dark theme renders
- All dependencies from STACK.md installed
- Environment configuration prepared for Supabase (Plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
